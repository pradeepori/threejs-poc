{"ast":null,"code":"var Stats = function () {\n  var mode = 0;\n  var container = document.createElement('div');\n  container.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n  container.addEventListener('click', function (event) {\n    event.preventDefault();\n    showPanel(++mode % container.children.length);\n  }, false); //\n\n  function addPanel(panel) {\n    container.appendChild(panel.dom);\n    return panel;\n  }\n\n  function showPanel(id) {\n    for (var i = 0; i < container.children.length; i++) {\n      container.children[i].style.display = i === id ? 'block' : 'none';\n    }\n\n    mode = id;\n  } //\n\n\n  var beginTime = (performance || Date).now(),\n      prevTime = beginTime,\n      frames = 0;\n  var fpsPanel = addPanel(new Stats.Panel('FPS', '#0ff', '#002'));\n  var msPanel = addPanel(new Stats.Panel('MS', '#0f0', '#020'));\n\n  if (self.performance && self.performance.memory) {\n    var memPanel = addPanel(new Stats.Panel('MB', '#f08', '#201'));\n  }\n\n  showPanel(0);\n  return {\n    REVISION: 16,\n    dom: container,\n    addPanel: addPanel,\n    showPanel: showPanel,\n    begin: function () {\n      beginTime = (performance || Date).now();\n    },\n    end: function () {\n      frames++;\n      var time = (performance || Date).now();\n      msPanel.update(time - beginTime, 200);\n\n      if (time >= prevTime + 1000) {\n        fpsPanel.update(frames * 1000 / (time - prevTime), 100);\n        prevTime = time;\n        frames = 0;\n\n        if (memPanel) {\n          var memory = performance.memory;\n          memPanel.update(memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576);\n        }\n      }\n\n      return time;\n    },\n    update: function () {\n      beginTime = this.end();\n    },\n    // Backwards Compatibility\n    domElement: container,\n    setMode: showPanel\n  };\n};\n\nStats.Panel = function (name, fg, bg) {\n  var min = Infinity,\n      max = 0,\n      round = Math.round;\n  var PR = round(window.devicePixelRatio || 1);\n  var WIDTH = 80 * PR,\n      HEIGHT = 48 * PR,\n      TEXT_X = 3 * PR,\n      TEXT_Y = 2 * PR,\n      GRAPH_X = 3 * PR,\n      GRAPH_Y = 15 * PR,\n      GRAPH_WIDTH = 74 * PR,\n      GRAPH_HEIGHT = 30 * PR;\n  var canvas = document.createElement('canvas');\n  canvas.width = WIDTH;\n  canvas.height = HEIGHT;\n  canvas.style.cssText = 'width:80px;height:48px';\n  var context = canvas.getContext('2d');\n  context.font = 'bold ' + 9 * PR + 'px Helvetica,Arial,sans-serif';\n  context.textBaseline = 'top';\n  context.fillStyle = bg;\n  context.fillRect(0, 0, WIDTH, HEIGHT);\n  context.fillStyle = fg;\n  context.fillText(name, TEXT_X, TEXT_Y);\n  context.fillRect(GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT);\n  context.fillStyle = bg;\n  context.globalAlpha = 0.9;\n  context.fillRect(GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT);\n  return {\n    dom: canvas,\n    update: function (value, maxValue) {\n      min = Math.min(min, value);\n      max = Math.max(max, value);\n      context.fillStyle = bg;\n      context.globalAlpha = 1;\n      context.fillRect(0, 0, WIDTH, GRAPH_Y);\n      context.fillStyle = fg;\n      context.fillText(round(value) + ' ' + name + ' (' + round(min) + '-' + round(max) + ')', TEXT_X, TEXT_Y);\n      context.drawImage(canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT);\n      context.fillRect(GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT);\n      context.fillStyle = bg;\n      context.globalAlpha = 0.9;\n      context.fillRect(GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round((1 - value / maxValue) * GRAPH_HEIGHT));\n    }\n  };\n};\n\nexport default Stats;","map":null,"metadata":{},"sourceType":"module"}